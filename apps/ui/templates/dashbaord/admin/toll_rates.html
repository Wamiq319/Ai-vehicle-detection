{% extends "dashbaord/admin/base_admin.html" %} {% block content %}

<!-- Messages -->
{% if messages %}
<div class="mb-6">
  {% for message in messages %}
  <div
    class="p-4 rounded-lg {% if message.tags == 'success' %}bg-green-100 text-green-800 border border-green-200{% elif message.tags == 'error' %}bg-red-100 text-red-800 border border-red-200{% else %}bg-blue-100 text-blue-800 border border-blue-200{% endif %}"
  >
    {{ message }}
  </div>
  {% endfor %}
</div>
{% endif %}

<div class="max-w-3xl mx-auto bg-white rounded-2xl shadow p-8">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-blue-800 flex items-center gap-2">
      <span>ğŸš¦</span> Toll Rates
    </h2>
    <button
      id="edit-btn"
      class="px-4 py-2 bg-blue-700 text-white rounded-lg shadow hover:bg-blue-800 transition"
    >
      âœï¸ Edit
    </button>
  </div>

  <!-- Rates Display Section -->
  <div id="rates-display" class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    {% for vehicle, rate in rates.items %}
    <div
      class="bg-blue-50 rounded-lg p-6 border border-blue-200 flex flex-col items-center"
    >
      <span class="text-5xl mb-2">
        {% if vehicle == 'car' %}ğŸš—
        {% elif vehicle == 'truck' %}ğŸš›
        {% elif vehicle == 'bus' %}ğŸšŒ
        {% elif vehicle == 'van' %}ğŸš
        {% elif vehicle == 'motorbike' %}ğŸï¸
        {% elif vehicle == 'threewheel' %}ğŸ›º
        {% else %}â“
        {% endif %}
      </span>
      <h3 class="text-lg font-bold text-blue-800 mb-2">{{ vehicle|title }}</h3>
      <p class="text-2xl font-bold text-gray-900 rate-display">
        <span class="text-lg font-semibold">RS</span>{{ rate }}
      </p>
    </div>
    {% endfor %}
  </div>

  <!-- Hidden Form for Editing -->
  <form
    method="POST"
    id="rates-form"
    action="{% url 'tolls:toll_rates' %}"
    class="hidden"
  >
    {% csrf_token %}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
      {% for vehicle, rate in rates.items %}
      <div
        class="bg-blue-50 rounded-lg p-6 border border-blue-200 flex flex-col items-center"
      >
        <span class="text-5xl mb-2">
            {% if vehicle == 'car' %}ğŸš—
            {% elif vehicle == 'truck' %}ğŸš›
            {% elif vehicle == 'bus' %}ğŸšŒ
            {% elif vehicle == 'van' %}ğŸš
            {% elif vehicle == 'motorbike' %}ğŸï¸
            {% elif vehicle == 'threewheel' %}ğŸ›º
            {% else %}â“
            {% endif %}
        </span>
        <h3 class="text-lg font-bold text-blue-800 mb-2">{{ vehicle|title }}</h3>
        <input
          type="number"
          name="{{ vehicle }}_rate"
          value="{{ rate }}"
          class="text-center text-2xl font-bold text-gray-900 border rounded-xl p-2 w-32 editable-input"
        />
      </div>
      {% endfor %}
    </div>

    <!-- Save/Cancel Buttons -->
    <div class="flex justify-end gap-4">
      <button
        type="submit"
        class="px-6 py-3 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition"
      >
        ğŸ’¾ Save Changes
      </button>
      <button
        type="button"
        id="cancel-btn"
        class="px-6 py-3 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition"
      >
        âŒ Cancel
      </button>
    </div>
  </form>
</div>

<script>
  const editBtn = document.getElementById("edit-btn");
  const cancelBtn = document.getElementById("cancel-btn");
  const ratesDisplay = document.getElementById("rates-display");
  const ratesForm = document.getElementById("rates-form");

  editBtn.addEventListener("click", () => {
    ratesDisplay.classList.add("hidden");
    ratesForm.classList.remove("hidden");
    editBtn.classList.add("hidden");
  });

  cancelBtn.addEventListener("click", () => {
    ratesDisplay.classList.remove("hidden");
    ratesForm.classList.add("hidden");
    editBtn.classList.remove("hidden");
  });
</script>
{% endblock %}
